{"version":3,"sources":["context/userContext.js","components/auth/AuthOptions.js","components/layout/Header.js","components/pages/Home.js","components/errors/ErrorNotice.js","components/auth/Login.js","components/auth/Register.js","App.js","reportWebVitals.js","index.js"],"names":["createContext","AuthOptions","useContext","UserContext","userData","setUserData","history","useHistory","className","user","onClick","token","undefined","localStorage","setItem","push","Header","id","to","Home","userContext","useEffect","displayName","ErrorNotice","props","message","clearError","Login","useState","email","setEmail","password","setPassword","error","setError","submit","e","a","preventDefault","loginUser","Axios","post","loginRes","data","response","msg","onSubmit","htmlFor","type","onChange","target","value","Register","passwordCheck","setpasswordCheck","setDisplayName","newUser","placeholder","App","getItem","headers","get","userRes","checkLoggedIn","Provider","exact","path","component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d3d73cef.chunk.js","sourcesContent":["import { createContext } from 'react';\r\n\r\n\r\nexport default createContext(null); //by default createContext won't have any data inside","import React, { useContext } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport UserContext from '../../context/userContext';\r\n\r\nexport default function AuthOptions() {\r\n    const { userData, setUserData } = useContext(UserContext);\r\n\r\n    const history = useHistory();\r\n\r\n    const register = () => history.push(\"/register\");\r\n    const login = () => history.push(\"/login\");\r\n    const logout = () => {\r\n        setUserData({\r\n            token: undefined,\r\n            user: undefined\r\n        });\r\n        localStorage.setItem(\"auth-token\", \"\");\r\n    };\r\n\r\n    return <nav className=\"auth-options\">\r\n        {userData.user ? (\r\n            <>\r\n            {/* <button onClick={delUser}>Delete User</button> */}\r\n            <button onClick={logout}>Log out</button>\r\n            </>\r\n        ) : (\r\n            <>\r\n            <button onClick={register}>Register</button>\r\n            <button onClick={login}>Login</button>\r\n            </>\r\n        )}\r\n    </nav>\r\n}\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport AuthOptions from '../auth/AuthOptions';\r\n\r\n\r\nexport default function Header() {\r\n    return <header id=\"header\">\r\n        <Link to=\"/\">\r\n            <h1 className=\"title\">App Auth</h1>\r\n        </Link>\r\n        <AuthOptions />\r\n    </header>\r\n}","import React, { useEffect, useContext } from 'react';\r\nimport userContext from '../../context/userContext';\r\nimport { Link } from \"react-router-dom\";\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nexport default function Home() {\r\n\r\n    const {userData} = useContext(userContext);\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        if( !userData.user ) history.push(\"/login\")\r\n    // here we removed the dependancy array -----> },[]);\r\n    });\r\n\r\n    return (\r\n        <div className=\"page\">\r\n        {userData.user ? (\r\n            <>\r\n            <h1 className=\"welcome\">Welcome {userData.user.displayName}</h1>\r\n            </>\r\n        ) : (\r\n          <>\r\n            <h2>You are not logged in</h2>\r\n            <Link to=\"/login\">Log in</Link>\r\n          </>\r\n        )}\r\n      </div>\r\n    );\r\n}","import React from 'react'\r\n\r\nexport default function ErrorNotice(props) {\r\n    return (\r\n        <div className=\"error-notice\">\r\n            <span>{props.message}</span>            \r\n            <button onClick={props.clearError}>X</button>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useContext } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport UserContext from '../../context/userContext';\r\nimport ErrorNotice from '../errors/ErrorNotice';\r\nimport Axios from 'axios';\r\n\r\nexport default function Login() {\r\n    const [email, setEmail] = useState();\r\n    const [password, setPassword] = useState();\r\n    const [error, setError] = useState();\r\n\r\n    // here we enable the imported 'UserContext'\r\n    const { setUserData } = useContext(UserContext);\r\n    const history = useHistory();\r\n\r\n    const submit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n        // here we grab the states of this four inputs\r\n        const loginUser = { email, password };\r\n        const loginRes = await Axios.post(\r\n            \"https://login-sign.herokuapp.com/login\", \r\n            loginUser\r\n            );\r\n\r\n        setUserData({\r\n            token: loginRes.data.token,\r\n            user: loginRes.data.user\r\n        });\r\n        localStorage.setItem(\"auth-token\", loginRes.data.token);\r\n        history.push(\"/\");\r\n      } catch (err) {\r\n        err.response.data.msg && setError(err.response.data.msg);\r\n    }\r\n    }  \r\n\r\n    return  <div className=\"page\">\r\n    <h1>Login</h1>\r\n    {error && <ErrorNotice message={error} clearError={() => setError(undefined)} />}    \r\n    <form className=\"form\" onSubmit={submit}>\r\n        <label htmlFor=\"login-email\">Email</label>\r\n        <input\r\n          id=\"login-email\"\r\n          type=\"email\"\r\n          onChange={(e) => setEmail(e.target.value)}\r\n        />\r\n\r\n        <label htmlFor=\"login-password\">Password</label>\r\n        <input\r\n          id=\"login-password\"\r\n          type=\"password\"\r\n          onChange={(e) => setPassword(e.target.value)}\r\n        />\r\n\r\n        <input type=\"submit\" value=\"Log in\" />\r\n      </form>\r\n    </div>\r\n}","import React, { useState, useContext } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport UserContext from '../../context/userContext';\r\nimport ErrorNotice from '../errors/ErrorNotice';\r\nimport Axios from 'axios';\r\n\r\nexport default function Register() {\r\n    const [email, setEmail] = useState();\r\n    const [password, setPassword] = useState();\r\n    const [passwordCheck, setpasswordCheck] = useState();\r\n    const [displayName, setDisplayName] = useState();\r\n    const [error, setError] = useState();\r\n\r\n    // here we enable the imported 'UserContext'\r\n    const { setUserData } = useContext(UserContext);\r\n    const history = useHistory();\r\n\r\n    const submit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        try { \r\n            // here we grab the states of this four inputs\r\n            const newUser = { email, password, passwordCheck, displayName };\r\n            await Axios.post(\r\n                \"https://login-sign.herokuapp.com/users/register\",\r\n                newUser\r\n            );\r\n            const loginRes = await Axios.post(\r\n                \"https://login-sign.herokuapp.com/users/login\", {\r\n                email,\r\n                password\r\n                });\r\n            setUserData({\r\n                token: loginRes.data.token,\r\n                user: loginRes.data.user\r\n            });\r\n            localStorage.setItem(\"auth-token\", loginRes.data.token);\r\n            history.push(\"/\");\r\n        } catch (err) {\r\n            err.response.data.msg && setError(err.response.data.msg);\r\n        }\r\n    }\r\n\r\n    return <div className=\"page\">\r\n        <h1>Register</h1>\r\n        {error && <ErrorNotice message={error} clearError={() => setError(undefined)} />}\r\n        <form className=\"form\" onSubmit={submit}>\r\n            <label htmlFor=\"register-email\">Email</label>\r\n            <input id=\"register-email\" type=\"email\" onChange={e => setEmail(e.target.value)} />\r\n\r\n            <label htmlFor=\"register-password\">Password</label>\r\n            <input id=\"register-password\" type=\"password\" onChange={e => setPassword(e.target.value)} />\r\n            <input type=\"password\" placeholder=\"Verify password\" onChange={e => setpasswordCheck(e.target.value)} />\r\n\r\n            <label htmlFor=\"register-display-name\">Display name</label>\r\n            <input id=\"register-display-name\" type=\"text\" onChange={e => setDisplayName(e.target.value)} />\r\n\r\n            <input type=\"submit\" value=\"Register\" />\r\n        </form>\r\n        </div>\r\n}","import React, { useState, useEffect } from 'react';\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\nimport Axios from 'axios';\nimport Header from './components/layout/Header';\nimport Home from './components/pages/Home';\nimport Login from './components/auth/Login';\nimport Register from './components/auth/Register';\nimport UserContext from './context/userContext';\n\n\nexport default function App() {\n  const [userData, setUserData] = useState({\n    token: undefined,\n    user: undefined\n  });\n\n  useEffect(() => {\n    const checkLoggedIn = async () => {\n      let token = localStorage.getItem(\"auth-token\");\n      if (token === null) {\n        localStorage.setItem(\"auth-token\", \"\");\n        token = \"\";\n      }\n      const tokenRes = await Axios.post(\n        \"https://login-sign.herokuapp.com/users/tokenIsValid\",\n        null,\n        { headers: { \"x-auth-token\": token } }\n      );\n      if (tokenRes.data) {\n        const userRes = await Axios.get(\"https://login-sign.herokuapp.com/users/\", {\n          headers: { \"x-auth-token\": token },\n        });\n        setUserData({\n          token,\n          user: userRes.data,\n        });\n      }\n    };\n\n    checkLoggedIn();\n    // , [] <--- this means no dependencies\n  }, []);\n\n  return (\n    <>\n    {/* BrowserRouter component surrounds everything we have access to the routing, so this will be the root component of our website*/}\n      <BrowserRouter>\n      <UserContext.Provider value={{ userData, setUserData }}>\n        {/* Whatever page we are on, the Header will stay always on top */}\n        <Header />\n        <div className=\"container\">\n        {/* Everything we put in here will have access to check our URL*/}\n        <Switch>\n          {/* path is the Route component property */}\n          <Route exact path=\"/\" component={Home} />\n          <Route path=\"/login\" component={Login} />\n          <Route path=\"/register\" component={Register} />\n        </Switch>\n        </div>\n        </UserContext.Provider>  \n      </BrowserRouter>\n    </>\n  );\n}\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './style.css';\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(<App />, document.getElementById('root'));\n\nreportWebVitals();\n\n"],"sourceRoot":""}